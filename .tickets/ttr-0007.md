---
id: ttr-0007
status: open
deps: [ttr-0006]
links: []
created: 2026-01-29T18:06:00Z
type: task
priority: 1
assignee: acmyers
parent: ttr-0001
tags: [github, issues]
external-ref: gh-7
---
# Issue Creation and Updates

Implement GitHub issue creation and update operations.

## Description

Implement issue operations in `src/github/issues.rs`:

### Create Issue
- `create_issue(repo, title, body, labels, assignee)` 
- Returns the created issue number and node ID
- Body should include the ticket marker: `<!-- ticket:{id} -->`

### Update Issue
- `update_issue(issue_id, title, body)`
- `close_issue(issue_id)`
- `reopen_issue(issue_id)`

### Fetch Issue
- `get_issue(repo, number)` - returns issue body, state, node ID
- Used for conflict detection (checking marker)

### Labels
- `get_or_create_label(repo, name)` - returns label node ID
- `add_labels_to_issue(issue_id, label_ids)`
- Creates labels with a default color if they don't exist

GraphQL mutations needed:
- `createIssue`
- `updateIssue`
- `closeIssue`
- `reopenIssue`
- `createLabel`
- `addLabelsToLabelable`

## Acceptance Criteria

- [ ] Can create issues with title, body, and assignee
- [ ] Can update issue title and body
- [ ] Can close and reopen issues
- [ ] Can fetch issue details for conflict detection
- [ ] Can create labels if they don't exist
- [ ] Can add labels to issues
- [ ] Issue body includes ticket marker comment
