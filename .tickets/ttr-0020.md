---
id: ttr-0020
status: closed
deps: [ttr-0019]
links: []
created: 2026-01-29T22:02:00Z
type: task
priority: 2
assignee: acmyers
parent: ttr-0012
tags: [github, projects]
external-ref: gh-26
---
# Project Field Sync

Set project field values (Status, Iteration) when adding issues to a project.

## Description

After adding an issue to a project, set field values based on ticket state.

### Config

```toml
[project]
status_field = "Status"
iteration_field = "Iteration"

[project.status]
# ticket status -> project Status option
open = "Todo"
in_progress = "In Progress"
closed = "Done"

[project.iteration]
# special value: use current active iteration
default = "@current"
```

### Implementation

1. On `SyncEngine::new()`:
   - Fetch project fields via `node(id).fields`
   - Find configured status_field and iteration_field
   - Validate status mappings exist as options
   - For iteration, identify current active iteration

2. After adding to project (Phase 5):
   - Batch call `updateProjectV2ItemFieldValue` to set Status
   - Batch call `updateProjectV2ItemFieldValue` to set Iteration

3. On ticket update:
   - If ticket.status changed, update project Status field

### Field Types

- **Status** (SingleSelect): Use `singleSelectOptionId` in field value
- **Iteration** (IterationField): Use `iterationId` in field value

### `@current` Iteration

The `@current` special value means "use the active iteration":
- Iteration field has `configuration.iterations` (active) and `completedIterations`
- Pick the first (or only) item from `iterations`

### Edge Cases

- Field not found: warn and skip that field
- Option not found in mapping: fail fast with available options
- No active iteration: warn and skip iteration assignment

## Acceptance Criteria

- [ ] Sets Status field on project item based on ticket.status
- [ ] Sets Iteration field to current iteration on create
- [ ] Updates Status when ticket.status changes
- [ ] Validates field options exist before sync
- [ ] Clear error listing available options on validation failure
- [ ] Handles missing fields gracefully with warning
